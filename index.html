<!DOCTYPE html>
<html>
<body>
<script src="./libv86.js"></script>
<script>
window.onload = function() {
    window.emulator = new V86({
        wasm_path: "./v86.wasm",
        screen_container: document.getElementById("screen_container"),
        bios: {
            url: "main",
        },
    });
    window.emulator.add_listener("emulator-ready", () => setInterval(window.emulator.v86.cpu.cycle_internal, 100));
}

function up() {
    window.emulator.keyboard_send_scancodes([0x48]);
}

function left() {
    window.emulator.keyboard_send_scancodes([0x4B]);
}

function right() {
    window.emulator.keyboard_send_scancodes([0x4D]);
}

function down() {
    window.emulator.keyboard_send_scancodes([0x50]);
}

</script>
<div id="screen_container">
    <div style="white-space: pre; font: 14px monospace; line-height: 14px"></div>
    <canvas style="display: none"></canvas>
</div>
<button onclick="up()">up</button>
<button onclick="left()">left</button>
<button onclick="down()">down</button>
<button onclick="right()">right</button>
</body>
